# 作用域

JavaScript 中的作用域是指变量和函数的可访问性和可见性范围。作用域决定了在代码中的哪些位置可以访问变量或函数。

在 JavaScript 中，有两种主要的作用域类型：全局作用域和局部作用域。

全局作用域是在整个程序中都可访问的作用域。在全局作用域中声明的变量和函数可以被程序中的任何部分访问。

局部作用域是在特定代码块（如函数或循环）内部声明的作用域。在局部作用域中声明的变量和函数只能在其声明的代码块内部访问。

JavaScript 使用词法作用域，也称为静态作用域。这意味着作用域是在代码编写时确定的，而不是在运行时确定的。作用域链是一种机制，用于确定变量在嵌套作用域中的查找顺序。

当在一个作用域中引用一个变量时，JavaScript 引擎首先在当前作用域中查找该变量。如果找不到，则会沿着作用域链向上一级作用域查找，直到找到该变量或到达全局作用域。如果在全局作用域中仍然找不到该变量，则会抛出一个引用错误。

理解 JavaScript 的作用域对于编写高质量的代码非常重要，因为它可以帮助您避免变量冲突和不必要的 bug。

### 变量作用域

JavaScript 中的变量作用域分为全局作用域和局部作用域。

全局作用域是在整个程序中都可访问的作用域。在全局作用域中声明的变量可以在程序的任何地方进行访问。全局作用域中声明的变量通常是在函数外部声明的，或者在没有包裹在函数中的代码块中声明的。

例如，在下面的代码中，变量 `name` 和函数 `sayHello` 都是在全局作用域中声明的，因此可以在程序的任何地方进行访问：

```javascript
var name = "John";

function sayHello() {
  console.log("Hello, " + name + "!");
}

sayHello(); // 输出：Hello, John!
```

局部作用域是在特定代码块（如函数或循环）内部声明的作用域。在局部作用域中声明的变量只能在其声明的代码块内部访问。这样可以避免变量之间的冲突，并且可以控制变量的可见性。

例如，在下面的代码中，变量 `age` 是在函数 `getAge` 的局部作用域中声明的，因此只能在该函数内部访问：

```javascript
function getAge() {
  var age = 30;
  console.log("Age: " + age);
}

getAge(); // 输出：Age: 30
console.log(age); // 抛出 ReferenceError: age is not defined
```

在 JavaScript 中，变量的作用域是由它们的声明方式决定的。使用 `var` 关键字声明的变量具有函数作用域，而使用 `let` 或 `const` 关键字声明的变量具有块级作用域。块级作用域是指由花括号 `{}` 包裹的代码块内部的作用域。

例如，在下面的代码中，变量 `x` 是在 `if` 语句块的块级作用域中声明的，因此只能在该块级作用域内部访问：

```javascript
if (true) {
  let x = 10;
  console.log(x); // 输出：10
}

console.log(x); // 抛出 ReferenceError: x is not defined
```

了解变量作用域对于编写可维护和可理解的代码非常重要，因为它可以帮助您避免变量冲突和意外的行为。
